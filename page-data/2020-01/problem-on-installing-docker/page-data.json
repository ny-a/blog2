{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/2020-01/problem-on-installing-docker/","result":{"data":{"site":{"siteMetadata":{"title":"Blog"}},"markdownRemark":{"id":"c77034ef-a515-58c9-852a-0ae7c040f244","excerpt":"Docker…","html":"<p>Docker のインストールは何度もやったことがあるのですが、稼働中のサーバー上でインストールした経験はなかったので、\n(特殊な状況というか、あまり好ましくない状況ですが)ネットワーク周りで少しハマりました。</p>\n<h2>背景</h2>\n<p>稼働中のサービスがあるホストで、再起動は避けたい状況でした。</p>\n<p>そのサービスのアップデートをデプロイする前に、docker コンテナ化したアップデート済みサービスを\nデプロイして検証しようとしていました。</p>\n<p>いやまあ検証環境分けろはそうなんですが……。</p>\n<h2>発生した問題</h2>\n<p>centos7 に docker をインストールし、docker-compose でコンテナを起動した所、\n他のコンテナとはネットワークアクセス可能なのに、外部へのアクセスができない状況でした。</p>\n<p>(直接？の原因としては、 iptables の FORWARD チェーンが DROP になっていました。)</p>\n<p>iptables に docker 用のルールが自動で追加されるようなのですが(手元のマシンには追加されていました)、そのホストには\n追加されていませんでした。</p>\n<h2>解決方法</h2>\n<p><code class=\"language-text\">systemctl restart docker</code> を実行しました。終わり。</p>\n<h2>まとめ？</h2>\n<p>普通にホスト再起動してあげましょう。\nというかメンテナンスしよ？</p>","frontmatter":{"title":"dockerのインストールでハマりました","date":"January 09, 2020"}}},"pageContext":{"slug":"2020-01/problem-on-installing-docker/","previous":{"fields":{"slug":"2020-01/reading-learn-you-a-haskell-for-great-good/"},"frontmatter":{"title":"すごいHaskell楽しく学ぼうを読み始めました"}},"next":{"fields":{"slug":"2020-01/introduction-of-gpg-ssh-agent/"},"frontmatter":{"title":"GnuPGのssh-agentエミュレータを使ってみました"}}}}}