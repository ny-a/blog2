{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/2020-01/move-blog-contents-to-another-repo/","result":{"data":{"site":{"siteMetadata":{"title":"Blog"}},"markdownRemark":{"id":"41d3b474-a5b0-546b-9e69-94df3efbd4c0","excerpt":"今までは gatsby のブログ用レポジトリにブログの内容を追加していましたが、\nテンプレートと内容は分けた方がいいかなと思い、内容だけ別レポジトリに分けてみました。 具体的には、 gatsby-source-filesystem を使っていたのを gatsby-source-git…","html":"<p>今までは gatsby のブログ用レポジトリにブログの内容を追加していましたが、\nテンプレートと内容は分けた方がいいかなと思い、内容だけ別レポジトリに分けてみました。</p>\n<p>具体的には、 gatsby-source-filesystem を使っていたのを gatsby-source-git に変更しました。\n基本的に gatsby-source-filesystem と同様に使えると書いてありましたが、\nslug の生成に createFilePath を使っていたのが gatsby-source-filesystem に依存していたので、\nnode.parent.file.relativeDirectory から生成するように変更しました。</p>\n<p>また、 gatsby-source-git の指定だけだと、タイミングの問題なのか gatsby-transformer-remark あたりで\n問題が発生していたので、 gatsby-source-filesystem でダミーのソースを指定することでとりあえず対処しました。</p>\n<p>レポジトリを分離したので CI を使ってビルドするようにしようかなと思ったのですが、そうすると\n別に gatsby-source-git を使わなくても、 CI 側で事前に checkout しておけばいいのでは……と思ってきました。\nまた戻すかもしれません。</p>","frontmatter":{"title":"Blogの内容を別レポジトリに移動しました","date":"January 29, 2020"}}},"pageContext":{"slug":"2020-01/move-blog-contents-to-another-repo/","previous":{"fields":{"slug":"2020-01/can-not-build-grpc-node/"},"frontmatter":{"title":"grpc-nodeのビルドに失敗する"}},"next":{"fields":{"slug":"2020-01/config-continuous-delivery/"},"frontmatter":{"title":"GitHubActionsを使ってデプロイを自動化しました"}}}}}