{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/2020-02/use-ecdsa-key-on-ec2/","result":{"data":{"site":{"siteMetadata":{"title":"Blog"}},"markdownRemark":{"id":"b3a6c050-6fe6-5502-ba75-6bba8b2cb187","excerpt":"AWS のキーペアは RSA しか対応していないと思いますが、最近は RSA を使うこともかなり減っていて、新しくセットアップした\nPC などでは ECDSA/Ed25519 のキーしか作っていないこともあります。\nそこで、 UserData を使って普段使いの SSH キーを取得して SSH…","html":"<p>AWS のキーペアは RSA しか対応していないと思いますが、最近は RSA を使うこともかなり減っていて、新しくセットアップした\nPC などでは ECDSA/Ed25519 のキーしか作っていないこともあります。\nそこで、 UserData を使って普段使いの SSH キーを取得して SSH できるようにしました。</p>\n<h2>UserData</h2>\n<p>AmazonLinux2 を使っているので、ログインユーザーは <code class=\"language-text\">ec2-user</code> です。</p>\n<p>UserData を以下のようにします。</p>\n<div class=\"gatsby-highlight\" data-language=\"shellscript\"><pre class=\"language-shellscript\"><code class=\"language-shellscript\">#!/bin/bash\n\nset -eu\n\ncurl https://github.com/ny-a.keys &gt;&gt; /home/ec2-user/.ssh/authorized_keys</code></pre></div>\n<p>AmazonLinux に入っている OpenSSH のバージョンが古くて RSA にしか対応していないわけではないので、\n<code class=\"language-text\">authorized_keys</code> に入れてあげさえすれば使うことができます。</p>\n<p>AWS のキーペアで管理しないため、本番環境などでは何か問題があるかも……とは思いますが、普段使いのキーを使える上に、\n普段使いのキーを更新したあとに起動したインスタンスは新しいキーを使えるようになるので、利便性は高いんじゃないかなと\n思います。</p>\n<p>とりあえず、開発中などはこのようにすると便利そうだと思いました。</p>","frontmatter":{"title":"EC2にECDSAのキーを使ってSSHできるようにしました","date":"February 25, 2020"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"2020-02/use-ecdsa-key-on-ec2/","previous":{"fields":{"slug":"2020-02/aws-cli-assume-role/"},"frontmatter":{"title":"AWS CLIでAssumeRole"}},"next":null}}}