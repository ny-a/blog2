{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/2020-02/dnssec-error/","result":{"data":{"site":{"siteMetadata":{"title":"Blog"}},"markdownRemark":{"id":"cc6b0e99-a915-51b1-a968-a1f577c557c0","excerpt":"Raspberry Pi に ArchLinux をインストールして RTC モジュールの設定をしてみたのですがうまくいかず、\nDNSSEC のエラーでホスト名の解決ができない問題に遭遇しました。 始めの問題としては、  が通りませんでした。  の内容は問題なさそうですし、  と  も問題なく動いていて、\nその…","html":"<p>Raspberry Pi に ArchLinux をインストールして RTC モジュールの設定をしてみたのですがうまくいかず、\nDNSSEC のエラーでホスト名の解決ができない問題に遭遇しました。</p>\n<p>始めの問題としては、 <code class=\"language-text\">pacman -Syu</code> が通りませんでした。</p>\n<div class=\"gatsby-highlight\" data-language=\"shellscript\"><pre class=\"language-shellscript\"><code class=\"language-shellscript\">$ sudo pacman -Syu\n:: Synchronizing package databases...\nerror: failed retrieving file &#39;core.db&#39; from mirror.archlinuxarm.org : Could not resolve host: mirror.archlinuxarm.org\nerror: failed to update core (invalid url for server)\nerror: failed retrieving file &#39;extra.db&#39; from mirror.archlinuxarm.org : Could not resolve host: mirror.archlinuxarm.org\nerror: failed to update extra (invalid url for server)\nerror: failed retrieving file &#39;community.db&#39; from mirror.archlinuxarm.org : Could not resolve host: mirror.archlinuxarm.org\nerror: failed to update community (invalid url for server)\nerror: failed retrieving file &#39;alarm.db&#39; from mirror.archlinuxarm.org : Could not resolve host: mirror.archlinuxarm.org\nerror: failed to update alarm (invalid url for server)\nerror: failed retrieving file &#39;aur.db&#39; from mirror.archlinuxarm.org : Could not resolve host: mirror.archlinuxarm.org\nerror: failed to update aur (invalid url for server)\nerror: failed to synchronize all databases</code></pre></div>\n<p><code class=\"language-text\">/etc/resolv.conf</code> の内容は問題なさそうですし、 <code class=\"language-text\">systemd-networkd</code> と <code class=\"language-text\">systemd-resolved</code> も問題なく動いていて、\nその2つを restart してみても変わりませんでした。</p>\n<p><code class=\"language-text\">dig</code> コマンドを入れようにも pacman が通らないのですが、 <code class=\"language-text\">systemd-resolve</code> コマンドでホスト名の解決ができるようです。\n試してみると、</p>\n<div class=\"gatsby-highlight\" data-language=\"shellscript\"><pre class=\"language-shellscript\"><code class=\"language-shellscript\">$ systemd-resolve ntp.org\nntp.org: resolve call failed: DNSSEC validation failed: no-signature</code></pre></div>\n<p>などと出てホスト名が解決できないようです。\n<code class=\"language-text\">systemctl status systemd-resolved</code> を見てみると、他のホスト名も同様にエラーになっています。\n(初めの方は <code class=\"language-text\">no-signature</code> ではなく <code class=\"language-text\">signature-expired</code> が出ていました)</p>\n<p><a href=\"https://archlinuxarm.org/forum/viewtopic.php?f=9&#x26;t=13614\">[SOLVED] DNS not working after pacman -Syu</a>\nに <code class=\"language-text\">systemd-resolved</code> を止めるという解決方法が書かれていたので試したところ、うまくいきました。</p>\n<p>DNSSEC についてあまり詳しくないので、きちんと調べてみようと思いました……。</p>","frontmatter":{"title":"DNSSEC validation failed エラー","date":"February 09, 2020"}}},"pageContext":{"slug":"2020-02/dnssec-error/","previous":{"fields":{"slug":"2020-02/connect-rtc-ds3231-to-raspberry-pi/"},"frontmatter":{"title":"RaspberryPi(Raspbian)にRTCモジュール(DS3231)を接続しました"}},"next":{"fields":{"slug":"2020-02/e-tax-for-android/"},"frontmatter":{"title":"Android用e-Taxアプリで確定申告をしようとしてハマりました"}}}}}